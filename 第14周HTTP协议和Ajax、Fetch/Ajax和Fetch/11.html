<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XHR属性</title>
</head>
<body>
    <script>
        // 1. responseType和response属性
        // const url = 'https://www.imooc.com/api/http/search/suggest?word=js';
        // const xhr = new XMLHttpRequest();
        // xhr.onreadystatechange = () => {
        //     if (xhr.readyState !== 4) {
        //         return;
        //     };
            
        //     if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) {
        //         // 文本形式的响应内容
        //         // console.log(xhr.responseText);
        //         console.log('response:', xhr.response);
        //         // console.log(JSON.parse(xhr.response));
        //     };
        // }
        // // xhr.responseType = '';   默认为空
        // // xhr.responseType = 'text';  文本类型
        // xhr.responseType = 'json';  // json类型
        // xhr.open('GET', url, true);
        // xhr.send(null);

        // ie6-9不支持, ie10开始支持

        // 2. timeout属性
        // 设置请求的超时事件(单位ms)
        // const url = 'https://www.imooc.com/api/http/search/suggest?word=js';
        // const xhr = new XMLHttpRequest();
        // xhr.onreadystatechange = () => {
        //     if (xhr.readyState !== 4) {
        //         return;
        //     };
            
        //     if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) {
        //         console.log(xhr.response);
        //     };
        // }

        // xhr.open('GET', url, true);
        // // ie8开始支持
        // xhr.timeout = 10000;
        // xhr.send(null);

        // 3. withCredentials属性
        // 指定使用Ajax发送请求时是否携带Cookie
        // 使用Ajax发送请求,默认情况下,同域时,会携带cookie;跨域时,不会
        // 最终能否成功携带Cookie,还要看服务器是否允许
        // 如果需要跨域携带cookie,必须指定Access-Control-Allow-Origin的域名
        // xhr.withCredentials = true;
        const url = 'https://www.imooc.com/api/http/search/suggest?word=js';
        // const url = './index.html';
        const xhr = new XMLHttpRequest();
        xhr.onreadystatechange = () => {
            if (xhr.readyState !== 4) {
                return;
            };
            
            if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) {
                console.log(xhr.response);
            };
        }

        xhr.open('GET', url, true);
        xhr.withCredentials = true;
        xhr.send(null);
        // ie10开始支持
        
    </script>
</body>
</html>